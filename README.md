@[å›¾æ–‡å¹¶èŒ‚åŸºäºCentOS Linux release 7.8.2003 Coreå®‰è£…å¹¶DockeråŒ–ä½ çš„Node.jsåº”ç”¨:watermelon:](https://github.com/tangdou369098655/docker/edit/master/README.md)


:cherry_blossom:ç®€ä½“ä¸­æ–‡:cherry_blossom: | [English](https://github.com/tangdou369098655/docker/blob/master/README_ENG.md)

## è¯´æ˜:cherries:ğŸŒºğŸŒ»
* æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨CentOS Linux release 7.8.2003éƒ¨ç½²å¹¶ä½¿ç”¨Dockerã€‚
* æ—¨åœ¨ä½¿ç”¨æœ€ç®€å•å¿«é€Ÿçš„åŠæ³•ï¼Œ:smirk:è§£å†³ä½¿ç”¨dockeréƒ¨ç½²nodejséœ€æ±‚&#x1F353;ã€‚

## :cherry_blossom::cherry_blossom::cherry_blossom::cherry_blossom::cherry_blossom::cherry_blossom:

## å‰æ:cherries:ğŸŒºğŸŒ»
>ä½ è¦æœ‰ä¸€ä¸ªæœåŠ¡å™¨å“Ÿ~~
>è´­ä¹°åæ‰“å¼€å°±åƒè¿™ä¸ªä¸‹é¢è¿™ä¸ªæ ·å­:grin:


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020052418024250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
## å¤‡æ³¨:cherries:
- :cherry_blossom:å› ä¸ºæœ¬æ¥ç”¨çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨è¿›è¡Œå®‰è£…ï¼ŒAliyun Linux 2.1903 LTS 64ä½æ“ä½œç³»ç»Ÿçš„ECSå®ä¾‹ï¼ŒåæœŸé‡åˆ°ä¸€äº›é—®é¢˜ï¼ŒæŸ¥è©¢å¾ˆå¤šè³‡æ–™æŒ‰ç…§è³‡æ–™æ“ä½œï¼Œä½†æ˜¯å•é¡Œæš‚æ—¶è¿˜æœªè§£å†³ï¼Œæ‰€ä»¥ç”¨äº†åŒäº‹çš„æœåŠ¡å™¨è¿›è¡Œå†æ¬¡å®‰è£…:grin:
- å…·ä½“é…ç½®æƒ…å†µå¦‚ä¸‹
- &#x1F353;æŸ¥çœ‹Linux å†…æ ¸&#x1F353;

```bash
uname -a
cat /proc/version
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630222141221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
- æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„è¯¦ç»†ä¿¡æ¯

```bash
1.cat /etc/redhat-release(æ­¤æ–¹æ³•åªé€‚åˆRedhat ç³»çš„Linux)
2.lsb_release -a (æ­¤å‘½ä»¤é€‚ç”¨äºæ‰€æœ‰çš„Linux å‘è¡Œç‰ˆæœ¬ï¼‰
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630222951679.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
## æ­¥éª¤ä¸€ï¼šé“¾æ¥æœåŠ¡å™¨:cherry_blossom:
1. é“¾æ¥æˆåŠŸåå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœä¸çŸ¥é“å¦‚ä½•é“¾æ¥ï¼Œå¯ä»¥å‚è€ƒï¼ˆhttps://github.com/tangdou369098655/FrontEndDeployment/blob/master/nginx_zh.mdï¼‰:cherries:
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200524181539512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
2. ä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ yumæºã€‚:cherries:

```bash
yum update
yum install epel-release -y
yum clean all
yum list
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628152434129.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020062815254713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628152838135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628152912139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628152946921.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

3. å®‰è£…å¹¶è¿è¡ŒDockerã€‚:cherries:

```bash
yum install docker-io -y
systemctl start docker
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628153130693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628153143730.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628153644197.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

4. è§£å†³æŠ¥é”™ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼š:cherries:(å‚™è¨»ï¼Œå¦‚æœä½ ç”¨çš„CentOS Linuxå¯ä»¥ç›´æ¥è·³éé€™ä¸€æ­¥ï¼Œä¸€èˆ¬æ²’æœ‰ä¸‹é¢å•é¡Œ)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200628153838790.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

```bash
[root@iZ2ze67ifeuz62igol9apzZ ~]# docker -v
Docker version 1.13.1, build 4ef4b30/1.13.1
[root@iZ2ze67ifeuz62igol9apzZ ~]#  systemctl status docker.service -l
â— docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: failed (Result: exit-code) since æ—¥ 2020-06-28 15:31:55 CST; 6min ago
     Docs: http://docs.docker.com
  Process: 24481 ExecStart=/usr/bin/dockerd-current --add-runtime docker-runc=/usr/libexec/docker/docker-runc-current --default-runtime=docker-runc --exec-opt native.cgroupdriver=systemd --userland-proxy-path=/usr/libexec/docker/docker-proxy-current --init-path=/usr/libexec/docker/docker-init-current --seccomp-profile=/etc/docker/seccomp.json $OPTIONS $DOCKER_STORAGE_OPTIONS $DOCKER_NETWORK_OPTIONS $ADD_REGISTRY $BLOCK_REGISTRY $INSECURE_REGISTRY $REGISTRIES (code=exited, status=1/FAILURE)
 Main PID: 24481 (code=exited, status=1/FAILURE)

6æœˆ 28 15:31:54 iZ2ze67ifeuz62igol9apzZ systemd[1]: Starting Docker Application Container Engine...
6æœˆ 28 15:31:54 iZ2ze67ifeuz62igol9apzZ dockerd-current[24481]: time="2020-06-28T15:31:54.799852050+08:00" level=warning msg="could not change group /var/run/docker.sock to docker: group docker not found"
6æœˆ 28 15:31:54 iZ2ze67ifeuz62igol9apzZ dockerd-current[24481]: time="2020-06-28T15:31:54.800671443+08:00" level=info msg="libcontainerd: new containerd process, pid: 24490"
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ dockerd-current[24481]: time="2020-06-28T15:31:55.813485177+08:00" level=error msg="'overlay' not found as a supported filesystem on this host. Please ensure kernel is new enough and has overlay support loaded."
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ dockerd-current[24481]: time="2020-06-28T15:31:55.814654057+08:00" level=error msg="'overlay' not found as a supported filesystem on this host. Please ensure kernel is new enough and has overlay support loaded."
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ dockerd-current[24481]: Error starting daemon: error initializing graphdriver: devicemapper: Error running deviceCreate (CreatePool) dm_task_run failed
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ systemd[1]: docker.service: main process exited, code=exited, status=1/FAILURE
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ systemd[1]: Failed to start Docker Application Container Engine.
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ systemd[1]: Unit docker.service entered failed state.
6æœˆ 28 15:31:55 iZ2ze67ifeuz62igol9apzZ systemd[1]: docker.service failed.

```
è§£å†³æ–¹æ¡ˆå¦‚ä¸‹
 å¸è½½è€ç‰ˆæœ¬çš„ docker åŠå…¶ç›¸å…³ä¾èµ–
 

```bash
# 1ã€å…ˆæŸ¥è¯¢æ‰€æœ‰å®‰è£…çš„åŒ…

yum list installed | grep docker*
# æˆ–è€…
rpm -qa docker*
# 2ã€åˆ é™¤æŸ¥è¯¢å‡ºæ¥çš„åŒ…

# ä¸€èˆ¬æƒ…å†µä¼šæœ‰ä¸€ä¸ª
yum remove -y docker-ce
# 18.09æ–°å¢äº†cliå·¥å…·
yum remove -y docker-ce-cli
# 3ã€åˆ é™¤é•œåƒæ–‡ä»¶

rm -rf /var/lib/docker
rm -rf /var/lib/docker*
```

å‡çº§linuxå†…æ ¸ï¼Œé‡æ–°å®‰è£…dockerï¼š

```bash
#æŸ¥çœ‹å·²ç»å®‰è£…çš„å’Œæœªå®‰è£…çš„è½¯ä»¶åŒ…ç»„ï¼Œæ¥åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦å®‰è£…äº†ç›¸åº”çš„å¼€å‘ç¯å¢ƒå’Œå¼€å‘åº“ï¼›
yum grouplist
#ä¸€èˆ¬æ˜¯å®‰è£…è¿™ä¸¤ä¸ªè½¯ä»¶åŒ…ç»„ï¼Œè¿™æ ·åšä¼šç¡®å®šä½ æ‹¥æœ‰ç¼–è¯‘æ—¶æ‰€éœ€çš„ä¸€åˆ‡å·¥å…·
yum groupinstall "Development Tools"
#ä½ å¿…é¡»è¿™æ ·æ‰èƒ½è®© make *config è¿™ä¸ªæŒ‡ä»¤æ­£ç¡®åœ°æ‰§è¡Œ
yum install ncurses-devel
#å¦‚æœä½ æ²¡æœ‰ X ç¯å¢ƒï¼Œè¿™ä¸€æ¡å¯ä»¥ä¸ç”¨
yum install qt-devel
#åˆ›å»º CentOS-6 å†…æ ¸æ—¶éœ€è¦å®ƒä»¬
yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel 
```

- ä¸å¥½æ„æ€ï¼Œä¸Šé¢çš„æŠ¥é”™ä¸€ç›´æ²¡æœ‰è§£å†³ï¼Œæ‰¾äº†è®¸å¤šæ–¹æ³•å»å¤„ç†ï¼Œä½†æ˜¯å§‹ç»ˆæ˜¯æ²¡æœ‰ç»“æœï¼Œäºæ˜¯æˆ‘æ¢äº†åŒäº‹çš„æœåŠ¡å™¨æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤å®‰è£…ã€‚
- ä¸‹é¢çš„å†…å®¹å‡åŸºäºCentOS Linux release 7.8.2003 (Core)

5.  æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬,å¯åŠ¨ docker

```bash
docker version
systemctl start docker
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630223714662.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630223733893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
6. éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ

```bash
docker info
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630223820216.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
7. è®¾ç½®å¼€æœºå¯åŠ¨

```bash
 chkconfig docker on

```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630224457370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

## é…ç½®Docker
1. åˆ‡æ¢å›½å†…é•œåƒæº, åŠ é€Ÿè®¿é—® Docker Hub

```bash
echo "OPTIONS='--registry-mirror=https://mirror.ccs.tencentyun.com'" >> /etc/sysconfig/docker
systemctl daemon-reload
service docker restart
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630224955549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
2. å®‰è£…é…ç½®nodeç¯å¢ƒ

```bash
docker search node
docker pull docker.io/node:7.8.0

```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630225022144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630225130713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

3. åœ¨è‡ªå·±å–œæ¬¢çš„ç›®å½•é‡Œåˆ›å»ºDockerfileæ–‡ä»¶

```bash
[root@VM_0_5_centos ~]# cd /var/opt/test
[root@VM_0_5_centos test]# ll
æ€»ç”¨é‡ 0
[root@VM_0_5_centos test]# touch Dockerfile

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630231730478.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630231906913.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

4. å‡è®¾Node.jsåº”ç”¨çš„å¯åŠ¨å‘½ä»¤ä¸ºnode server.js, ç›‘å¬ç«¯å£ä¸º8090

```bash
# å¯ä»¥æŒ‡å®šä¾èµ–çš„nodeé•œåƒçš„ç‰ˆæœ¬ node:<version>ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œå°±ä¼šæ˜¯æœ€æ–°çš„
FROM node
WORKDIR /app

# æŠŠå…¶ä»–æºæ–‡ä»¶å¤åˆ¶åˆ°å·¥ä½œç›®å½•
COPY ./app /app
# æŠŠ package.jsonï¼Œpackage-lock.json(npm@5+) æˆ– yarn.lock å¤åˆ¶åˆ°å·¥ä½œç›®å½•(ç›¸å¯¹è·¯å¾„)
RUN npm install
# åªå®‰è£…dependenciesä¾èµ–
# æ›¿æ¢æˆåº”ç”¨å®é™…çš„ç«¯å£å·
EXPOSE 8090
# è¿™é‡Œæ ¹æ®å®é™…èµ·åŠ¨å‘½ä»¤åšä¿®æ”¹
CMD [ "node", "server.js" ]


```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705230429846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
5. è¡¥å…….dockerignore

```bash
touch .dockerignore
```
.dockerignoreå†…å®¹å¦‚ä¸‹

```bash
node_modules
npm-debug.log
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200630233218185.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705232058192.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
6. åˆ›å»ºé•œåƒ

```bash
docker build -t node78:v1 .

```
åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤å‰ï¼Œé¦–å…ˆä¼šå¯¹ Dockerfile è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œæœ‰è¯­æ³•é”™è¯¯æ—¶ä¼šè¿”å›ï¼šï¼ˆå¦‚æœæŒ‰ç…§ä¸Šé¢çš„Dockerfileé…ç½®æ–‡ä»¶ï¼Œä¸ä¼šæŠ¥è¿™ä¸ªé”™ï¼Œé…ç½®æ–‡ä»¶æ˜¯åæœŸä¿®æ”¹è¿‡çš„ï¼Œåˆé‡æ–°æˆªå›¾çš„å“¦~ï¼‰

```bash
[root@VM_0_5_centos test]# docker build -t node78:v1 .
Sending build context to Docker daemon 3.584 kB
Error response from daemon: Unknown instruction: â€‹ï¼š
```


7. æŸ¥çœ‹é•œåƒ

```bash
docker images
â€‹
# ç¤ºä¾‹è¾“å‡º
REPOSITORY                      TAG        ID              CREATED
node                            8          1934b0b038d1    5 days ago
${your_name}/${image_name}    latest     d64d3505b0d2    1 minute ago
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020063023380787.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

8. å˜—è©¦ä¸€ä¸‹docker run nodeä¸åƒ…å¯ä»¥å¯ä»¥å°‹æ‰¾é¡åƒï¼Œå¦‚æœæ²’æœ‰å®ƒå°±å¹«åŠ©ä½ ä¸‹è¼‰æœ€æ–°çš„ç‰ˆæœ¬
å› ä¸ºæˆ‘ä¸‹è½½çš„ä¸æ˜¯æœ€æ–°é•œåƒï¼Œå®ƒè‡ªåŠ¨å¼€å§‹ææœ€æ–°å•¦

```bash
docker run node
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705173202831.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
9. æŸ¥çœ‹é•œåƒ
>ä½ æœƒçœ‹åˆ°æˆ‘å€‘æœ‰å€†é¡åƒäº†,ä¸€å€‹æœ€æ–°ç‰ˆ,ä¸€å€‹æ˜¯åˆå§‹ä¸‹è¼‰çš„ç‰ˆæœ¬.è¦æ˜¯ä¸æƒ³è¦å¾ŒæœŸå¯ä»¥åˆªé™¤å“¦~
>åœ–ç‰‡è£¡çš„docker run å‘½ä»¤å…ˆä¸è¦åŸ·è¡Œå“¦~   
```bash
docker image ls
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705222720723.png)
 
10. å‡†å¤‡ä¸€ä¸ªç®€å•çš„nodejsæ–‡ä»¶

```bash
var http = require('http');

http.createServer(function (request, response) {


    response.writeHead(200, { 'Content-Type': 'text/plain' });


    response.end('Hello World\n');
}).listen(8090);

console.log('Server running at http://127.0.0.1:8090/');
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020070522593563.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705225247400.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705225633983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)

11. æ„å»ºé•œåƒï¼Œä¸è¦å¿˜äº†å¾Œé¢é‚„æœ‰ä¸€å€‹é»é»å“¦

```bash
docker build -t docker.io/node:latest .

```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705230105411.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
 
* å¯åŠ¨å®¹å™¨è„šæœ¬
```bash
docker run -d -p 8090:8090  docker.io/node:latest 

```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705230144806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
12. æµ‹è¯•ï¼ŒæˆåŠŸè¿æ¥
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200705232415710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmdkb3UzNjkwOTg2NTU=,size_16,color_FFFFFF,t_70)
 
 è‡³æ­¤æ­å–œï¼Œéƒ¨ç½²æˆåŠŸï¼
 ## å¸¸ç”¨å‘½ä»¤
* å¦å¤–é™„ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨(åŒ…æ‹¬å·²ç»ˆæ­¢çš„)
docker ps -a
# æˆ–ä½¿ç”¨æ–°å‘½ä»¤
docker container ls -a
```

```bash
# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps
# æˆ–ä½¿ç”¨æ–°å‘½ä»¤
docker container ls
â€‹
# ç¤ºä¾‹è¾“å‡º
ID            IMAGE                                COMMAND    ...   PORTS
ecce33b30ebf  ${your_name}/${image_name}:latest  npm start  ...   49160->8080
```

```bash
# æŸ¥çœ‹æŸå®¹å™¨å†…æ—¥å¿—
docker logs -f ${container_id}
```

```bash
# è¿›å…¥æŸå®¹å™¨ï¼Œå¹¶æœ‰shellæ‰§è¡Œç¯å¢ƒ
# è¿›å…¥å®¹å™¨
# -iè¡¨ç¤ºï¼šäº¤äº’å¼æ“ä½œï¼Œ-tè¡¨ç¤ºï¼šç»ˆç«¯
docker exec -it ${container_id} bash
# å¯é€šè¿‡è¾“å…¥ exit é€€å‡º 
```

```bash
# åœæ­¢å®¹å™¨
docker container stop ${container_id}
```

```bash
# å¯åŠ¨å·²ç»ˆæ­¢çš„å®¹å™¨
docker container start ${container_id}
```

```bash
#åˆ é™¤å®¹å™¨
docker container rm ${container_name || container_id}

#æŸ¥çœ‹é•œåƒ
docker images
# æˆ–ä½¿ç”¨æ–°å‘½ä»¤
docker image ls

#åˆ é™¤é•œåƒ
docker image rm ${image_id}

#å…¶ä»–å‘½ä»¤
doctor run -it -d --name springboot -p 8080:8080 springboot:latest
-d åå°è¿è¡Œå®¹å™¨,å¹¶è¿”å›å®¹å™¨ID
-i  ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-tåŒæ—¶ä½¿ç”¨
-t  ä¸ºå®¹å™¨æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸iåŒæ—¶ä½¿ç”¨
-P  å¤§å†™ï¼Œéšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœº
-p å°å†™ï¼ŒæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º: ä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£
--name é‡å‘½å
FROM 100.111.222.111/library/centos/jdk:1.8.0 -----OPEANJDK:8
ä»é•œåƒä¸‹è½½JDK
FROM æ˜¯æŒ‡éœ€è¦ä»“åº“ä¸‹è½½ä¸€ä¸ªJDKçš„é•œåƒä½œä¸ºåº•å±‚ç³»ç»Ÿï¼Œç„¶ååœ¨è¯¥JDKä¸Šæ‰§è¡Œåé¢é‚£äº›æ“ä½œã€‚
```
## ç»“è¯­:watermelon::watermelon::watermelon::watermelon::watermelon::watermelon:
>  æœ¬æ•™ç¨‹æ—¨åœ¨å¿«é€Ÿå®ŒæˆNode.jsé¡¹ç›®éƒ¨ç½²ï¼Œå…¶ä»–é…ç½®é¡¹è©³ç´°æƒ…æ³é—®é¢˜æ²¡æœ‰åˆ—ä¸¾å‡ºæ¥å“¦...åæœŸæœ‰ç©ºä¼šå¢åŠ é…ç½®æ–‡ç« å“Ÿ~~

>  æ¬¢è¿å¤§å®¶æŒ‡å‡ºæ–‡ç« éœ€è¦æ”¹æ­£ä¹‹å¤„&#x1F353;~  

>  å¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œæ¬¢è¿å¤§å®¶æå‡ºæ¥ï¼Œå…±åŒè¿›æ­¥å“Ÿ~~ 

